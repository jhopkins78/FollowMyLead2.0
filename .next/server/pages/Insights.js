(()=>{var e={};e.id=979,e.ids=[979,888,660],e.modules={1323:(e,t)=>{"use strict";Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},5002:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{config:()=>b,default:()=>h,getServerSideProps:()=>p,getStaticPaths:()=>m,getStaticProps:()=>g,reportWebVitals:()=>x,routeModule:()=>S,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>P,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>v});var r=a(7093),i=a(5244),n=a(1323),l=a(2329),o=a.n(l),c=a(1063),d=a(9644),u=e([c,d]);[c,d]=u.then?(await u)():u;let h=(0,n.l)(d,"default"),g=(0,n.l)(d,"getStaticProps"),m=(0,n.l)(d,"getStaticPaths"),p=(0,n.l)(d,"getServerSideProps"),b=(0,n.l)(d,"config"),x=(0,n.l)(d,"reportWebVitals"),v=(0,n.l)(d,"unstable_getStaticProps"),f=(0,n.l)(d,"unstable_getStaticPaths"),j=(0,n.l)(d,"unstable_getStaticParams"),y=(0,n.l)(d,"unstable_getServerProps"),P=(0,n.l)(d,"unstable_getServerSideProps"),S=new r.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/Insights",pathname:"/Insights",bundlePath:"",filename:""},components:{App:c.default,Document:o()},userland:d});s()}catch(e){s(e)}})},1979:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{H:()=>d,a:()=>u});var r=a(997),i=a(6689),n=a(100),l=a(1163),o=e([n]);n=(o.then?(await o)():o)[0];let c=(0,i.createContext)(null),d=({children:e})=>{let[t,a]=(0,i.useState)(null),s=(0,l.useRouter)();(0,i.useEffect)(()=>{},[]);let o=async(e,t)=>{try{let{token:r,user:i}=(await (0,n.x4)({email:e,password:t})).data.data;localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(i)),a(i),s.push("/dashboard")}catch(e){throw Error(e.response?.data?.message||"Login failed")}},d=async(e,t,r)=>{try{let{token:i,user:l}=(await (0,n.z2)({username:e,email:t,password:r})).data.data;localStorage.setItem("token",i),localStorage.setItem("user",JSON.stringify(l)),a(l),s.push("/dashboard")}catch(e){throw Error(e.response?.data?.message||"Registration failed")}};return r.jsx(c.Provider,{value:{user:t,login:o,register:d,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a(null),s.push("/login")},isAuthenticated:!!t},children:e})},u=()=>{let e=(0,i.useContext)(c);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};s()}catch(e){s(e)}})},9644:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{Insights:()=>u,default:()=>h});var r=a(997),i=a(6689),n=a(3767),l=a(2189),o=a(100),c=a(6201),d=e([n,l,o,c]);[n,l,o,c]=d.then?(await d)():d,n.Chart.register(n.CategoryScale,n.LinearScale,n.BarElement,n.Title,n.Tooltip,n.Legend,n.ArcElement,n.PointElement,n.LineElement);let u=()=>{let[e,t]=(0,i.useState)(null),[a,s]=(0,i.useState)(!0),n=async()=>{try{let e=await (0,o.on)();t(e.data.data)}catch(e){c.default.error("Failed to fetch insights data"),console.error("Error fetching insights:",e)}finally{s(!1)}};if((0,i.useEffect)(()=>{n()},[]),a)return r.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading insights..."});if(!e)return r.jsx("div",{className:"flex justify-center items-center h-screen",children:"No insight data available"});let d={labels:Object.keys(e.conversionRates),datasets:[{label:"Conversion Rate",data:Object.values(e.conversionRates),backgroundColor:"rgba(75, 192, 192, 0.5)"}]},u={labels:Object.keys(e.leadSourceDistribution),datasets:[{label:"Lead Source Distribution",data:Object.values(e.leadSourceDistribution),backgroundColor:["rgba(255, 99, 132, 0.5)","rgba(54, 162, 235, 0.5)","rgba(255, 206, 86, 0.5)","rgba(75, 192, 192, 0.5)","rgba(153, 102, 255, 0.5)"]}]},h={labels:Object.keys(e.qualityMetrics.leadQualityDistribution),datasets:[{label:"Lead Quality Distribution",data:Object.values(e.qualityMetrics.leadQualityDistribution),backgroundColor:["rgba(255, 99, 132, 0.5)","rgba(54, 162, 235, 0.5)","rgba(255, 206, 86, 0.5)"]}]},g={labels:Object.keys(e.engagementMetrics.totalVisits),datasets:[{label:"Total Visits",data:Object.values(e.engagementMetrics.totalVisits),borderColor:"rgba(75, 192, 192, 1)",tension:.1}]};return(0,r.jsxs)("div",{className:"container mx-auto p-4",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Lead Insights Dashboard"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Conversion Rates"}),r.jsx(l.Bar,{data:d})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Lead Sources"}),r.jsx(l.Pie,{data:u})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Lead Quality Distribution"}),r.jsx(l.Pie,{data:h})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Engagement Over Time"}),r.jsx(l.Line,{data:g})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow col-span-2",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Key Metrics"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Average Time Spent"}),(0,r.jsxs)("p",{className:"text-2xl font-bold",children:[e.engagementMetrics.averageTimeSpent," min"]})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Average Page Views"}),r.jsx("p",{className:"text-2xl font-bold",children:e.engagementMetrics.averagePageViews})]})]})]})]})]})},h=u;s()}catch(e){s(e)}})},1063:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>d});var r=a(997),i=a(3963),n=a.n(i),l=a(1979);a(108);var o=a(6201),c=e([l,o]);function d({Component:e,pageProps:t}){return r.jsx(l.H,{children:(0,r.jsxs)("html",{lang:"en",suppressHydrationWarning:!0,children:[(0,r.jsxs)("head",{children:[r.jsx("meta",{charSet:"utf-8"}),r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,r.jsxs)("body",{className:n().className,children:[r.jsx(e,{...t}),r.jsx(o.Toaster,{position:"top-right"})]})]})})}[l,o]=c.then?(await c)():c,s()}catch(e){s(e)}})},100:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{Hm:()=>h,Wf:()=>p,Wr:()=>m,d1:()=>g,hh:()=>u,on:()=>b,x4:()=>c,z2:()=>d});var r=a(9648),i=e([r]);r=(i.then?(await i)():i)[0];let n=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3000/api",l=process.env.NEXT_PUBLIC_INSIGHTS_API_URL||"https://cz0zmv145h.execute-api.us-west-1.amazonaws.com/prod",o=r.default.create({baseURL:n,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});let c=async e=>(await o.post("/auth/login",e)).data,d=async e=>(await o.post("/auth/register",e)).data,u=async()=>(await o.get("/leads")).data,h=async e=>{let t=new FormData;return t.append("file",e),(await o.post("/leads/upload-csv",t,{headers:{"Content-Type":"multipart/form-data"}})).data},g=async e=>(await o.get(`/leads/${e}`)).data,m=async(e,t)=>(await o.patch(`/leads/${e}/status`,{status:t}),{data:{data:void 0}}),p=async(e,t)=>(await o.post(`/leads/${e}/notes`,{content:t},{headers:{"Content-Type":"application/json"}})).data,b=async()=>({data:{data:(await r.default.get(`${l}/insights`)).data}});o.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e))),s()}catch(e){s(e)}})},108:()=>{},5244:(e,t)=>{"use strict";var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},9648:e=>{"use strict";e.exports=import("axios")},3767:e=>{"use strict";e.exports=import("chart.js")},2189:e=>{"use strict";e.exports=import("react-chartjs-2")},6201:e=>{"use strict";e.exports=import("react-hot-toast")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[559,239,329],()=>a(5002));module.exports=s})();