(()=>{var e={};e.id=79,e.ids=[79,888,660],e.modules={1323:(e,t)=>{"use strict";Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},1671:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>g,default:()=>x,getServerSideProps:()=>p,getStaticPaths:()=>h,getStaticProps:()=>u,reportWebVitals:()=>y,routeModule:()=>w,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>b,unstable_getStaticParams:()=>N,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>f});var r=s(7093),l=s(5244),i=s(1323),n=s(2329),d=s.n(n),c=s(1063),o=s(9404),m=e([c,o]);[c,o]=m.then?(await m)():m;let x=(0,i.l)(o,"default"),u=(0,i.l)(o,"getStaticProps"),h=(0,i.l)(o,"getStaticPaths"),p=(0,i.l)(o,"getServerSideProps"),g=(0,i.l)(o,"config"),y=(0,i.l)(o,"reportWebVitals"),f=(0,i.l)(o,"unstable_getStaticProps"),j=(0,i.l)(o,"unstable_getStaticPaths"),N=(0,i.l)(o,"unstable_getStaticParams"),v=(0,i.l)(o,"unstable_getServerProps"),b=(0,i.l)(o,"unstable_getServerSideProps"),w=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/LeadDetails",pathname:"/LeadDetails",bundlePath:"",filename:""},components:{App:c.default,Document:d()},userland:o});a()}catch(e){a(e)}})},1979:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.d(t,{H:()=>o,a:()=>m});var r=s(997),l=s(6689),i=s(100),n=s(1163),d=e([i]);i=(d.then?(await d)():d)[0];let c=(0,l.createContext)(null),o=({children:e})=>{let[t,s]=(0,l.useState)(null),a=(0,n.useRouter)();(0,l.useEffect)(()=>{},[]);let d=async(e,t)=>{try{let{token:r,user:l}=(await (0,i.x4)({email:e,password:t})).data.data;localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(l)),s(l),a.push("/dashboard")}catch(e){throw Error(e.response?.data?.message||"Login failed")}},o=async(e,t,r)=>{try{let{token:l,user:n}=(await (0,i.z2)({username:e,email:t,password:r})).data.data;localStorage.setItem("token",l),localStorage.setItem("user",JSON.stringify(n)),s(n),a.push("/dashboard")}catch(e){throw Error(e.response?.data?.message||"Registration failed")}};return r.jsx(c.Provider,{value:{user:t,login:d,register:o,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s(null),a.push("/login")},isAuthenticated:!!t},children:e})},m=()=>{let e=(0,l.useContext)(c);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};a()}catch(e){a(e)}})},9404:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{LeadDetails:()=>m,default:()=>x});var r=s(997),l=s(6689),i=s(1163),n=s(100),d=s(5641),c=s(6201),o=e([n,d,c]);[n,d,c]=o.then?(await o)():o;let m=()=>{var e;let t=(0,i.useRouter)(),{id:s}=t.query,[a,o]=(0,l.useState)(null),[m,x]=(0,l.useState)(!0),{register:u,handleSubmit:h,reset:p}=(0,d.useForm)();(0,l.useEffect)(()=>{s&&g()},[s]);let g=async()=>{try{let e=await (0,n.d1)(s);o(e.data.data)}catch(e){c.toast.error(e.response?.data?.message||"Failed to fetch lead details"),t.push("/dashboard")}finally{x(!1)}},y=async e=>{try{await (0,n.Wr)(s,e),o(t=>t?{...t,status:e}:null),c.toast.success("Status updated successfully")}catch(e){c.toast.error(e.response?.data?.message||"Failed to update status")}},f=async e=>{try{let t=(await (0,n.Wf)(s,e.content)).data.data;o(e=>e?{...e,notes:[t,...e.notes]}:null),p(),c.toast.success("Note added successfully")}catch(e){c.toast.error(e.response?.data?.message||"Failed to add note")}};return m?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):a?r.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"md:flex md:items-center md:justify-between mb-8",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 truncate",children:a.name}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a.company})]}),r.jsx("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:r.jsx("button",{onClick:()=>t.push("/dashboard"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Back to Dashboard"})})]}),(0,r.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[r.jsx("div",{className:"px-4 py-5 sm:px-6",children:r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Lead Information"})}),r.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:(0,r.jsxs)("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2",children:[(0,r.jsxs)("div",{className:"sm:col-span-1",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Email"}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.email})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Phone"}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.phone})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Industry"}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.industry||"Not specified"})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Location"}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.location||"Not specified"})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Lead Score"}),r.jsx("dd",{className:"mt-1",children:void 0!==a.score?r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${(e=a.score)>=80?"text-green-600 bg-green-100":e>=60?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100"}`,children:a.score}):r.jsx("span",{className:"text-sm text-gray-500",children:"Not available"})})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),r.jsx("dd",{className:"mt-1",children:r.jsx("select",{value:a.status,onChange:e=>y(e.target.value),className:`text-sm rounded-full px-3 py-1 font-semibold ${{new:"bg-blue-100 text-blue-800",contacted:"bg-yellow-100 text-yellow-800",qualified:"bg-green-100 text-green-800",proposal:"bg-indigo-100 text-indigo-800",negotiation:"bg-purple-100 text-purple-800",closed:"bg-teal-100 text-teal-800",lost:"bg-gray-100 text-gray-800"}[a.status]}`,children:["new","contacted","qualified","proposal","negotiation","closed","lost"].map(e=>r.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Source"}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.source})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Estimated Value"}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:void 0!==a.estimated_value?`$${a.estimated_value.toLocaleString()}`:"Not specified"})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Created At"}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(a.createdAt).toLocaleDateString()})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Updated At"}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(a.updatedAt).toLocaleDateString()})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Last Contact"}),r.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a.lastContact?new Date(a.lastContact).toLocaleDateString():"Never"})]})]})})]}),(0,r.jsxs)("div",{className:"mt-8 bg-white shadow sm:rounded-lg",children:[r.jsx("div",{className:"px-4 py-5 sm:px-6",children:r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Notes"})}),(0,r.jsxs)("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:[(0,r.jsxs)("form",{onSubmit:h(f),className:"mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"content",className:"sr-only",children:"Add a note"}),r.jsx("textarea",{id:"content",rows:3,className:"shadow-sm block w-full focus:ring-primary-500 focus:border-primary-500 sm:text-sm border border-gray-300 rounded-md",placeholder:"Add a note...",...u("content",{required:!0})})]}),r.jsx("div",{className:"mt-3",children:r.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Add Note"})})]}),r.jsx("div",{className:"flow-root",children:r.jsx("ul",{role:"list",className:"-mb-8",children:a.notes.map((e,t)=>r.jsx("li",{children:(0,r.jsxs)("div",{className:"relative pb-8",children:[t!==a.notes.length-1?r.jsx("span",{className:"absolute top-5 left-5 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"}):null,(0,r.jsxs)("div",{className:"relative flex items-start space-x-3",children:[r.jsx("div",{className:"relative",children:r.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-400 flex items-center justify-center ring-8 ring-white",children:r.jsx("span",{className:"text-sm font-medium text-white",children:e.createdBy.charAt(0).toUpperCase()})})}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm",children:r.jsx("span",{className:"font-medium text-gray-900",children:e.createdBy})}),r.jsx("p",{className:"mt-0.5 text-sm text-gray-500",children:new Date(e.createdAt).toLocaleString()})]}),r.jsx("div",{className:"mt-2 text-sm text-gray-700",children:r.jsx("p",{children:e.content})})]})]})]})},e.id))})})]})]})]})}):null},x=m;a()}catch(e){a(e)}})},1063:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>o});var r=s(997),l=s(3963),i=s.n(l),n=s(1979);s(108);var d=s(6201),c=e([n,d]);function o({Component:e,pageProps:t}){return r.jsx(n.H,{children:(0,r.jsxs)("html",{lang:"en",suppressHydrationWarning:!0,children:[(0,r.jsxs)("head",{children:[r.jsx("meta",{charSet:"utf-8"}),r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,r.jsxs)("body",{className:i().className,children:[r.jsx(e,{...t}),r.jsx(d.Toaster,{position:"top-right"})]})]})})}[n,d]=c.then?(await c)():c,a()}catch(e){a(e)}})},100:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.d(t,{Hm:()=>x,Wf:()=>p,Wr:()=>h,d1:()=>u,hh:()=>m,on:()=>g,x4:()=>c,z2:()=>o});var r=s(9648),l=e([r]);r=(l.then?(await l)():l)[0];let i=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3000/api",n=process.env.NEXT_PUBLIC_INSIGHTS_API_URL||"https://cz0zmv145h.execute-api.us-west-1.amazonaws.com/prod",d=r.default.create({baseURL:i,headers:{"Content-Type":"application/json"}});d.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});let c=async e=>(await d.post("/auth/login",e)).data,o=async e=>(await d.post("/auth/register",e)).data,m=async()=>(await d.get("/leads")).data,x=async e=>{let t=new FormData;return t.append("file",e),(await d.post("/leads/upload-csv",t,{headers:{"Content-Type":"multipart/form-data"}})).data},u=async e=>(await d.get(`/leads/${e}`)).data,h=async(e,t)=>(await d.patch(`/leads/${e}/status`,{status:t}),{data:{data:void 0}}),p=async(e,t)=>(await d.post(`/leads/${e}/notes`,{content:t},{headers:{"Content-Type":"application/json"}})).data,g=async()=>({data:{data:(await r.default.get(`${n}/insights`)).data}});d.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e))),a()}catch(e){a(e)}})},108:()=>{},5244:(e,t)=>{"use strict";var s;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},9648:e=>{"use strict";e.exports=import("axios")},5641:e=>{"use strict";e.exports=import("react-hook-form")},6201:e=>{"use strict";e.exports=import("react-hot-toast")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[559,239,329],()=>s(1671));module.exports=a})();