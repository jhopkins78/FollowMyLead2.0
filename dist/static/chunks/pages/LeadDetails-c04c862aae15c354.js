(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79],{1145:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/LeadDetails",function(){return t(5636)}])},5636:function(e,s,t){"use strict";t.r(s),t.d(s,{LeadDetails:function(){return c}});var a=t(5893),l=t(7294),d=t(1163),r=t(1460),n=t(7536),i=t(6501);let c=()=>{var e;let s=(0,d.useRouter)(),{id:t}=s.query,[c,m]=(0,l.useState)(null),[o,x]=(0,l.useState)(!0),{register:u,handleSubmit:h,reset:g}=(0,n.cI)();(0,l.useEffect)(()=>{t&&p()},[t]);let p=async()=>{try{let e=await (0,r.d1)(t);m(e.data.data)}catch(t){var e,a;i.Am.error((null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||"Failed to fetch lead details"),s.push("/dashboard")}finally{x(!1)}},N=async e=>{try{await (0,r.Wr)(t,e),m(s=>s?{...s,status:e}:null),i.Am.success("Status updated successfully")}catch(e){var s,a;i.Am.error((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to update status")}},j=async e=>{try{let s=(await (0,r.Wf)(t,e.content)).data.data;m(e=>e?{...e,notes:[s,...e.notes]}:null),g(),i.Am.success("Note added successfully")}catch(e){var s,a;i.Am.error((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to add note")}};return o?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):c?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"md:flex md:items-center md:justify-between mb-8",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 truncate",children:c.name}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:c.company})]}),(0,a.jsx)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:(0,a.jsx)("button",{onClick:()=>s.push("/dashboard"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Back to Dashboard"})})]}),(0,a.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,a.jsx)("div",{className:"px-4 py-5 sm:px-6",children:(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Lead Information"})}),(0,a.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:(0,a.jsxs)("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"sm:col-span-1",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Email"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:c.email})]}),(0,a.jsxs)("div",{className:"sm:col-span-1",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Phone"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:c.phone})]}),(0,a.jsxs)("div",{className:"sm:col-span-1",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Industry"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:c.industry||"Not specified"})]}),(0,a.jsxs)("div",{className:"sm:col-span-1",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Location"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:c.location||"Not specified"})]}),(0,a.jsxs)("div",{className:"sm:col-span-1",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Lead Score"}),(0,a.jsx)("dd",{className:"mt-1",children:void 0!==c.score?(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat((e=c.score)>=80?"text-green-600 bg-green-100":e>=60?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100"),children:c.score}):(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Not available"})})]}),(0,a.jsxs)("div",{className:"sm:col-span-1",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,a.jsx)("dd",{className:"mt-1",children:(0,a.jsx)("select",{value:c.status,onChange:e=>N(e.target.value),className:"text-sm rounded-full px-3 py-1 font-semibold ".concat({new:"bg-blue-100 text-blue-800",contacted:"bg-yellow-100 text-yellow-800",qualified:"bg-green-100 text-green-800",proposal:"bg-indigo-100 text-indigo-800",negotiation:"bg-purple-100 text-purple-800",closed:"bg-teal-100 text-teal-800",lost:"bg-gray-100 text-gray-800"}[c.status]),children:["new","contacted","qualified","proposal","negotiation","closed","lost"].map(e=>(0,a.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})})]}),(0,a.jsxs)("div",{className:"sm:col-span-1",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Source"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:c.source})]}),(0,a.jsxs)("div",{className:"sm:col-span-1",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Estimated Value"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:void 0!==c.estimated_value?"$".concat(c.estimated_value.toLocaleString()):"Not specified"})]}),(0,a.jsxs)("div",{className:"sm:col-span-1",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Created At"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(c.createdAt).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"sm:col-span-1",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Updated At"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(c.updatedAt).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"sm:col-span-1",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Last Contact"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:c.lastContact?new Date(c.lastContact).toLocaleDateString():"Never"})]})]})})]}),(0,a.jsxs)("div",{className:"mt-8 bg-white shadow sm:rounded-lg",children:[(0,a.jsx)("div",{className:"px-4 py-5 sm:px-6",children:(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Notes"})}),(0,a.jsxs)("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:[(0,a.jsxs)("form",{onSubmit:h(j),className:"mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"content",className:"sr-only",children:"Add a note"}),(0,a.jsx)("textarea",{id:"content",rows:3,className:"shadow-sm block w-full focus:ring-primary-500 focus:border-primary-500 sm:text-sm border border-gray-300 rounded-md",placeholder:"Add a note...",...u("content",{required:!0})})]}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Add Note"})})]}),(0,a.jsx)("div",{className:"flow-root",children:(0,a.jsx)("ul",{role:"list",className:"-mb-8",children:c.notes.map((e,s)=>(0,a.jsx)("li",{children:(0,a.jsxs)("div",{className:"relative pb-8",children:[s!==c.notes.length-1?(0,a.jsx)("span",{className:"absolute top-5 left-5 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"}):null,(0,a.jsxs)("div",{className:"relative flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-400 flex items-center justify-center ring-8 ring-white",children:(0,a.jsx)("span",{className:"text-sm font-medium text-white",children:e.createdBy.charAt(0).toUpperCase()})})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.createdBy})}),(0,a.jsx)("p",{className:"mt-0.5 text-sm text-gray-500",children:new Date(e.createdAt).toLocaleString()})]}),(0,a.jsx)("div",{className:"mt-2 text-sm text-gray-700",children:(0,a.jsx)("p",{children:e.content})})]})]})]})},e.id))})})]})]})]})}):null};s.default=c}},function(e){e.O(0,[536,774,888,179],function(){return e(e.s=1145)}),_N_E=e.O()}]);